document.addEventListener("DOMContentLoaded",function(){"use strict";function a(a){a.querySelectorAll(".acf-image-uploader img[data-name=\"image\"]").forEach(a=>{const b=a.src.split("?")[0],c=b.replace(/-\d+x\d+(?=\.\w+)/,"");a.src=c+"?v="+Date.now()})}function b(a){Object.keys(f).forEach(function(b){const c=a.querySelectorAll(".acf-field[data-name=\""+b+"\"]");c.forEach(c=>{if(c.querySelector(".bp-rotate-image"))return;const d=c.querySelector("input[type=text], textarea");if(!d)return;const e=f[b],g=a.querySelector(".acf-field[data-name=\""+e+"\"]");if(g){const a=g.querySelector("input[type=hidden]");if(a&&a.value){const a=document.createElement("button");a.type="button",a.className="bp-rotate-image",a.dataset.captionName=b,a.style.display="inline-flex",a.innerHTML=`
                    <svg viewBox="0 0 512 512">
                        <path d="m359 227 16 67c5 24-4 41-28 47l-138 33c-23 6-40-5-46-28l-33-137c-5-24 5-40 28-46l138-34c24-5 40 5 46 29l17 69zm-143 45-27 64c-3 10 5 10 12 8l140-34c3-1 9-3 9-5-1-4-3-8-6-10l-64-55c-8-6-12-5-16 4l-20 49-28-21zm-7-30c14-3 23-18 20-32s-17-23-32-20c-14 3-23 18-20 32 3 13 18 23 32 20z"/><path d="M311 464v21A278 278 0 0 1 33 209l-28-1 41-59 41 59-30 1c-6 102 82 249 254 255zm165-163 28 1-40 57-42-58h30c7-104-82-251-254-256V24a277 277 0 0 1 278 277z"/><path d="m216 272 28 21 20-49c4-9 8-10 15-4l65 55c3 2 5 6 6 10 0 2-6 4-9 5l-140 34c-7 2-15 2-12-8l27-64zm-7-30c-14 3-29-7-32-20-3-14 6-29 20-32 15-3 29 6 32 20s-6 29-20 32z" style="fill:none;stroke:#000;"/>
                    </svg>
                `,d.insertAdjacentElement("beforebegin",a)}}})})}async function c(a){const b=new FormData;b.append("action","bp_rotate_image"),b.append("nonce",bpRotate.nonce),b.append("attachment_id",a);const c=await fetch(bpRotate.ajaxurl,{method:"POST",credentials:"same-origin",body:b});return c.json()}function d(a){a.querySelectorAll("img[data-name=\"image\"]").forEach(a=>{const b=a.src.split("?")[0].replace(/-\d+x\d+(?=\.\w+)/,"");a.src=b+"?t="+Date.now()})}console.log("Jobsite GEO admin js v5");const f={jobsite_photo_1_alt:"jobsite_photo_1",jobsite_photo_2_alt:"jobsite_photo_2",jobsite_photo_3_alt:"jobsite_photo_3",jobsite_photo_4_alt:"jobsite_photo_4"};document.addEventListener("click",async function(a){const b=a.target.closest(".bp-rotate-image");if(!b)return;const e=b.dataset.captionName,g=f[e],h=document.querySelector(".acf-field[data-name=\""+g+"\"]"),i=h.querySelector("input[type=hidden]"),j=i.value;if(!j)return void alert("No image selected.");b.disabled=!0,b.classList.add("spinning"),b.innerHTML=`
            <svg viewBox="0 0 512 512">
                <path d="m359 227 16 67c5 24-4 41-28 47l-138 33c-23 6-40-5-46-28l-33-137c-5-24 5-40 28-46l138-34c24-5 40 5 46 29l17 69zm-143 45-27 64c-3 10 5 10 12 8l140-34c3-1 9-3 9-5-1-4-3-8-6-10l-64-55c-8-6-12-5-16 4l-20 49-28-21zm-7-30c14-3 23-18 20-32s-17-23-32-20c-14 3-23 18-20 32 3 13 18 23 32 20z"/><path d="m216 272 28 21 20-49c4-9 8-10 15-4l65 55c3 2 5 6 6 10 0 2-6 4-9 5l-140 34c-7 2-15 2-12-8l27-64zm-7-30c-14 3-29-7-32-20-3-14 6-29 20-32 15-3 29 6 32 20s-6 29-20 32z" style="fill:none;stroke:#000;"/>
            </svg>
        `;const k=await c(j);return b.disabled=!1,b.classList.remove("spinning"),b.innerHTML=`
            <svg viewBox="0 0 512 512">
                <path d="m359 227 16 67c5 24-4 41-28 47l-138 33c-23 6-40-5-46-28l-33-137c-5-24 5-40 28-46l138-34c24-5 40 5 46 29l17 69zm-143 45-27 64c-3 10 5 10 12 8l140-34c3-1 9-3 9-5-1-4-3-8-6-10l-64-55c-8-6-12-5-16 4l-20 49-28-21zm-7-30c14-3 23-18 20-32s-17-23-32-20c-14 3-23 18-20 32 3 13 18 23 32 20z"/><path d="M311 464v21A278 278 0 0 1 33 209l-28-1 41-59 41 59-30 1c-6 102 82 249 254 255zm165-163 28 1-40 57-42-58h30c7-104-82-251-254-256V24a277 277 0 0 1 278 277z"/><path d="m216 272 28 21 20-49c4-9 8-10 15-4l65 55c3 2 5 6 6 10 0 2-6 4-9 5l-140 34c-7 2-15 2-12-8l27-64zm-7-30c-14 3-29-7-32-20-3-14 6-29 20-32 15-3 29 6 32 20s-6 29-20 32z" style="fill:none;stroke:#000;"/>
            </svg>
        `,k.success?void d(h,j):void alert("Error: "+k.data)});const g=new MutationObserver(()=>{b(document),a(document)});g.observe(document.body,{subtree:!0,childList:!0}),b(document),a(document)});
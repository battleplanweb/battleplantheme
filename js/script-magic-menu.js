document.addEventListener("DOMContentLoaded",function(){"use strict";(function(a){window.magicMenu=function(b,c,d,e){b=b||"#desktop-navigation .menu",c=c||"active",d=d||"non-active",e=e||"false";var f,g,h,i,j,k,l=a(b),m=l.parent().parent(),n="horizontal";m.hasClass("widget")&&(n="vertical"),m.prepend("<div id='magic-line'></div>"),m.prepend("<div id='off-screen' class='"+n+"'></div>");var o=a("#magic-line"),p=a("#off-screen");if(g=l.find("li.current-menu-parent").length?l.find("li.current-menu-parent"):l.find("li.current-menu-item"),(!g.length||g.hasClass("mobile-only"))&&(g=p),g.find(">a").addClass(c),window.setMagicMenu=function(){"horizontal"==n?(i=Math.round(g.position().left+(g.outerWidth()-g.width())/2),h=Math.round(g.position().top),j=Math.round(g.width()),k=Math.round(o.data("origH"))):(i=Math.round(parseInt(g.parent().css("padding-left"))),h=Math.round(g.position().top),j=Math.round(o.data("origW")),k=Math.round(g.height())),o.css({transform:"translate("+i+"px, "+h+"px)",width:j,height:k}).data("origT",h).data("origL",i).data("origW",j).data("origH",k),o.delay(250).animate({opacity:1},0);var b=[],e=[],m=[],p=[];a("#desktop-navigation ul.main-menu > .menu-item, .widget-navigation .menu-item").each(function(){var c=a(this);"horizontal"==n?(b.push(Math.round(c.position().top)),e.push(Math.round(c.position().left+(c.outerWidth()-c.width())/2)),m.push(Math.round(c.width())),p.push(Math.round(o.data("origH")))):(b.push(Math.round(c.position().top)),e.push(Math.round(parseInt(c.parent().css("padding-left")))),m.push(Math.round(o.data("origW"))),p.push(Math.round(c.height())))}),l.find(" > li").hover(function(){f=a(this);var h=f.index();setTimeout(function(){o.css({transform:"translate("+e[h]+"px, "+b[h]+"px)",width:m[h],height:p[h]})},25),g.find(">a").removeClass(c).addClass(d),f.find(">a").addClass(c).removeClass(d)},function(){setTimeout(function(){o.css({transform:"translate("+o.data("origL")+"px, "+o.data("origT")+"px)",width:o.data("origW"),height:o.data("origH")})},25),f.find(">a").removeClass(c).addClass(d),g.find(">a").addClass(c).removeClass(d)})},"true"==e){var q,r,s,t=m.find(".flex").position().left,u=m.find(".flex").width(),v=g.position().left-t;m.find("li").mouseover(function(){v=a(this).position().left-t,magicColor(v)}),m.find(".flex").mouseout(function(){v=g.position().left-t,magicColor(v)}),window.magicColor=function(b){q=b+o.width()/2,r=q/u,s=o.position().left-t,.33>r?a("body").removeClass("menu-alt-2").removeClass("menu-alt-3").addClass("menu-alt-1"):.33<=r&&.66>r?a("body").removeClass("menu-alt-1").removeClass("menu-alt-3").addClass("menu-alt-2"):a("body").removeClass("menu-alt-1").removeClass("menu-alt-2").addClass("menu-alt-3"),q<=s?a("body").addClass("menu-dir-l").removeClass("menu-dir-r"):a("body").addClass("menu-dir-r").removeClass("menu-dir-l")},magicColor(v)}setTimeout(function(){setMagicMenu()},500),a(window).resize(function(){setMagicMenu()})}})(jQuery)});